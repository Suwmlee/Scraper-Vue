(function(e){function t(t){for(var n,r,l=t[0],s=t[1],c=t[2],d=0,f=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,l=1;l<o.length;l++){var s=o[l];0!==i[s]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},i={app:0},a=[];function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"0f3d":function(e,t,o){},1842:function(e,t,o){},4002:function(e,t,o){"use strict";o("7325")},"4f13":function(e,t,o){},7325:function(e,t,o){},8099:function(e,t,o){"use strict";o("fbcf")},"821b":function(e,t,o){"use strict";o("9782")},"869e":function(e,t,o){},"8aec":function(e,t,o){},"8d0c":function(e,t,o){"use strict";o("8aec")},9782:function(e,t,o){},9970:function(e,t,o){"use strict";o("e280")},b592:function(e,t,o){"use strict";o("1842")},cd49:function(e,t,o){"use strict";o.r(t);var n=o("2b0e"),i=o("5c96"),a=o.n(i),r=(o("0fae"),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-container",[t("el-header",[t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("简介")]),t("el-menu-item",{attrs:{index:"3"}},[e._v("刮削")]),t("el-menu-item",{attrs:{index:"4"}},[e._v("转移")]),t("el-menu-item",{attrs:{index:"5"}},[e._v("重命名")]),t("el-menu-item",{attrs:{index:"6"}},[e._v("自动")]),t("el-menu-item",{attrs:{index:"7"}},[e._v("选项")])],1)],1),t("el-main",["1"===e.activeIndex?t("Tutorial"):e._e(),"3"===e.activeIndex?t("JavScraping"):e._e(),"4"===e.activeIndex?t("Transfer"):e._e(),"5"===e.activeIndex?t("Reanme"):e._e(),"6"===e.activeIndex?t("Automation"):e._e(),"7"===e.activeIndex?t("Options"):e._e()],1),t("el-footer",{staticClass:"site-footer"},[t("a",{attrs:{href:"https://github.com/Suwmlee/ikaros",target:"_blank"}},[e._v("ikaros")]),e._v(" "+e._s(e.version))])],1)],1)}),l=[],s=(o("d9e2"),o("14d9"),o("bc3a")),c=o.n(s),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body-wrap"},[t("vue-markdown",{staticClass:"markdown-body",attrs:{source:e.fileContent}})],1)},d=[],f=o("9ce6"),p=o.n(f),h=(o("e4cbc"),{name:"tutorial",components:{VueMarkdown:p.a},data:function(){return{fileContent:""}},created:function(){this.getContent()},methods:{getContent:function(){var e=this;c.a.get("/api/intro").then((function(t){e.fileContent=t.data})).catch((function(e){console.log(e)}))}}}),g=h,m=(o("9970"),o("2877")),b=Object(m["a"])(g,u,d,!1,null,"43cd10cb",null),v=b.exports,_=function(){var e=this,t=e._self._c;return t("div",[t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"first"}},[e._v("刮削")]),t("el-menu-item",{attrs:{index:"second"}},[e._v("配置")])],1),"first"===e.activeIndex?t("Scraping"):e._e(),"second"===e.activeIndex?t("ScrapingConf"):e._e()],1)},w=[],k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body-wrap"},[t("el-select",{attrs:{placeholder:"请选择配置"},on:{change:e.changeConf},model:{value:e.selectedoption,callback:function(t){e.selectedoption=t},expression:"selectedoption"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1),t("el-divider"),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:12}},[t("el-button",{attrs:{loading:e.running,size:"medium",type:"primary"},on:{click:e.start_all}},[e.running?t("span",[e._v("刮削中...")]):t("span",[e._v("开始")])]),e.running?t("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.stop}},[e._v("停止")]):e._e()],1),t("el-col",{attrs:{md:8}},[t("el-input",{attrs:{width:"auto",placeholder:"模糊查询"},on:{input:e.handleSearch},model:{value:e.blur,callback:function(t){e.blur=t},expression:"blur"}})],1),t("el-col",{attrs:{md:3,xs:10}},[t("el-button-group",[t("el-button",{attrs:{disabled:0===e.multipleSelection.length,icon:"el-icon-delete",type:"danger"},on:{click:e.delrecords}})],1),t("confirm-dialog",{ref:"confirm",attrs:{title:"确认",message:"删除刮削后的文件",subConfirmMessage:"同时删除原始文件"}})],1)],1),e.running?t("el-alert",{staticClass:"alter-tip",attrs:{title:e.tips,closable:!1,type:"info"}}):e._e(),t("el-table",{ref:"multipleTable",attrs:{data:e.scrapingrecords,stripe:"","default-sort":{prop:"updatetime",order:"descending"},"cell-style":{padding:"0",height:"50px"}},on:{"selection-change":e.handleSelectionChange,"sort-change":e.changesort}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"原始名称","min-width":"150","show-overflow-tooltip":!0,prop:"srcname"}}),t("el-table-column",{attrs:{label:"原始地址","min-width":"120","show-overflow-tooltip":!0,prop:"srcpath"}}),t("el-table-column",{attrs:{label:"状态",width:"80",sortable:"custom",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(o){return[0===o.row.status?t("span"):e._e(),1===o.row.status?t("span",[e._v("成功")]):e._e(),2===o.row.status?t("span",[e._v("失败")]):e._e(),3===o.row.status?t("span",[e._v("忽略")]):e._e(),4===o.row.status?t("span",[e._v("进行中")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"刮削用番号","min-width":"120","show-overflow-tooltip":!0,prop:"scrapingname"}}),t("el-table-column",{attrs:{label:"已删除",width:"100",align:"center",sortable:"custom",prop:"deleted"},scopedSlots:e._u([{key:"default",fn:function(o){return[!0===o.row.deleted?t("span",[e._v("✓")]):e._e(),!1===o.row.deleted?t("span"):e._e()]}}])}),t("el-table-column",{attrs:{label:"忽略",width:"80",align:"center",sortable:"custom",prop:"ignored"},scopedSlots:e._u([{key:"default",fn:function(o){return[!0===o.row.ignored?t("span",[e._v("✓")]):e._e(),!1===o.row.ignored?t("span"):e._e()]}}])}),t("el-table-column",{attrs:{label:"中文",width:"80",align:"center",sortable:"custom",prop:"cnsubtag"},scopedSlots:e._u([{key:"default",fn:function(o){return[!0===o.row.cnsubtag?t("span",[e._v("✓")]):e._e(),!1===o.row.cnsubtag?t("span"):e._e()]}}])}),t("el-table-column",{attrs:{label:"分片",width:"80",align:"center",prop:"cdnum"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.cdnum?t("span",{domProps:{textContent:e._s(o.row.cdnum)}}):e._e()]}}])}),t("el-table-column",{attrs:{label:"刮削后路径","min-width":"120","show-overflow-tooltip":!0,prop:"destpath"}}),t("el-table-column",{attrs:{label:"计划删除时间",width:"140","show-overflow-tooltip":!0,sortable:"custom",prop:"deadtime"}}),t("el-table-column",{attrs:{label:"更新时间",width:"140","show-overflow-tooltip":!0,sortable:"custom",prop:"updatetime"}}),t("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-refresh-right"},on:{click:function(t){return e.handleSingle(o.$index,o.row)}}}),t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(o.$index,o.row)}}})]}}])})],1),t("el-pagination",{attrs:{"page-size":10,"page-sizes":[10,20,50,100],"pager-count":7,"current-page":e.currentPage,layout:"sizes, prev, pager, next",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.editdialog,width:e.dialogWidth},on:{"update:visible":function(t){e.editdialog=t}}},[t("el-form",{attrs:{model:e.rowrecord,"label-width":"auto"}},[t("el-form-item",{attrs:{label:"原始名称",prop:"srcname"}},[t("span",{domProps:{textContent:e._s(e.rowrecord.srcname)}})]),t("el-form-item",{attrs:{label:"原始地址",prop:"srcpath"}},[t("span",{domProps:{textContent:e._s(e.rowrecord.srcpath)}})]),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-radio-group",{model:{value:e.recordoption,callback:function(t){e.recordoption=t},expression:"recordoption"}},[t("el-radio",{staticClass:"radio-btn",attrs:{label:0}},[e._v("正常")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:1}},[e._v("锁定")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:2}},[e._v("忽略")])],1)],1),t("el-form-item",{attrs:{label:"刮削番号",prop:"scrapingname"}},[t("el-input",{model:{value:e.rowrecord.scrapingname,callback:function(t){e.$set(e.rowrecord,"scrapingname",t)},expression:"rowrecord.scrapingname"}}),t("div",{staticClass:"tip-info"},[e._v("强制使用此番号刮削")])],1),t("el-form-item",{attrs:{label:"指定源",prop:"specifiedsource"}},[t("el-input",{model:{value:e.rowrecord.specifiedsource,callback:function(t){e.$set(e.rowrecord,"specifiedsource",t)},expression:"rowrecord.specifiedsource"}}),t("div",{staticClass:"tip-info"},[e._v("指定源,需要与`指定网址`搭配生效")])],1),t("el-form-item",{attrs:{label:"指定网址",prop:"specifiedurl"}},[t("el-input",{model:{value:e.rowrecord.specifiedurl,callback:function(t){e.$set(e.rowrecord,"specifiedurl",t)},expression:"rowrecord.specifiedurl"}}),t("div",{staticClass:"tip-info"},[e._v("指定网址,需要与`指定源`搭配生效")])],1),t("el-form-item",{attrs:{label:"中文标记",prop:"cnsubtag"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.rowrecord.cnsubtag,callback:function(t){e.$set(e.rowrecord,"cnsubtag",t)},expression:"rowrecord.cnsubtag"}})],1),t("el-form-item",{attrs:{label:"流出标记",prop:"leaktag"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.rowrecord.leaktag,callback:function(t){e.$set(e.rowrecord,"leaktag",t)},expression:"rowrecord.leaktag"}})],1),t("el-form-item",{attrs:{label:"无码标记",prop:"uncensoredtag"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.rowrecord.uncensoredtag,callback:function(t){e.$set(e.rowrecord,"uncensoredtag",t)},expression:"rowrecord.uncensoredtag"}})],1),t("el-form-item",{attrs:{label:"破解标记",prop:"hacktag"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.rowrecord.hacktag,callback:function(t){e.$set(e.rowrecord,"hacktag",t)},expression:"rowrecord.hacktag"}})],1),t("el-form-item",{attrs:{label:"分集编号",prop:"cdnum"}},[t("el-input",{attrs:{type:"number",min:0},model:{value:e.rowrecord.cdnum,callback:function(t){e.$set(e.rowrecord,"cdnum",t)},expression:"rowrecord.cdnum"}})],1),t("el-form-item",{attrs:{label:"清理时间",prop:"deadtime"}},[t("div",[t("el-input",{staticStyle:{width:"12rem","margin-right":"1em"},attrs:{disabled:!0,size:"small"},model:{value:e.rowrecord.deadtime,callback:function(t){e.$set(e.rowrecord,"deadtime",t)},expression:"rowrecord.deadtime"}}),""!=e.rowrecord.deadtime?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.cancelDeadtime()}}},[e._v("取消删除计划")]):e._e()],1),t("div",{staticClass:"tip-info"},[e._v("源文件或刮削后文件不存在,到此时间将删除所有关联文件")])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.dialogexit()}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogupdate()}}},[e._v("修改")])],1)],1)],1)},y=[],x=function(){var e=this,t=e._self._c;return t("el-dialog",e._b({staticClass:"confirm-modal",attrs:{"modal-append-to-body":!1,"append-to-body":!0,visible:e.isVisible,"before-close":e.beforeClose},on:{close:e.close}},"el-dialog",e.$attrs,!1),[e._t("default",(function(){return[t("div",[t("span",[e._v(e._s(e.message))])]),t("el-checkbox",{model:{value:e.subcheck,callback:function(t){e.subcheck=t},expression:"subcheck"}},[e._v(e._s(e.subConfirmMessage))])]})),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[e._v(" "+e._s(e.cancelLabel)+" ")]),t("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.confirm.apply(null,arguments)}}},[e._v(" "+e._s(e.confirmLabel)+" ")])],1)],2)},C=[],$={name:"Confirm",props:{syncViaProps:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},message:{type:String,default:""},subConfirmMessage:{type:String,default:""},cancelLabel:{type:String,default:"取消"},confirmLabel:{type:String,default:"确认"},loading:{type:Boolean,default:!1},closeOnConfirm:{type:Boolean,default:!0}},data(){return{promise:void 0,beforeConfirm:()=>{},beforeCancel:()=>{},internalVisible:!1,subcheck:!1,resolvePromise:void 0,rejectPromise:void 0}},computed:{isVisible(){return this.visible||this.internalVisible}},methods:{beforeClose(e){e(),this.updateVisible(!1)},async close(){let e=()=>{this.updateVisible(!1),this.rejectPromise()};this.isVisible&&this.beforeCancel&&await this.beforeCancel(e),e()},updateVisible(e){this.syncViaProps?this.$emit("update:visible",e):this.internalVisible=e},async confirm(){let e=()=>{this.updateVisible(!1),this.resolvePromise()};this.beforeConfirm&&await this.beforeConfirm(e),this.closeOnConfirm&&e()},show(){return this.subcheck=!1,this.updateVisible(!0),new Promise((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})}}},S=$,D=(o("b592"),Object(m["a"])(S,x,C,!1,null,null,null)),z=D.exports,P={name:"scraping",components:{ConfirmDialog:z},data:function(){return{running:!1,timer:null,timerstatus:0,dialogWidth:0,tips:"刮削中",currentPage:1,totalnum:10,pagesize:10,blur:"",sortprop:"",sortorder:"",editdialog:!1,rowrecord:[],scrapingrecords:[],multipleSelection:[],selectedoption:-1,options:[],recordoption:0,scrapingconfig:{}}},created:function(){this.setDialogWidth()},mounted:function(){var e=this;this.getconfs(),this.refresh(),window.onresize=function(){return function(){e.setDialogWidth()}()}},beforeDestroy:function(){this.stoptimer()},methods:{getconfs:function(){var e=this,t="/api/scraping/conf/all";c.a.get(t).then((function(t){e.options=t.data,-1===e.selectedoption&&(e.selectedoption=e.options[0].id),e.changeConf()})).catch((function(e){console.log(e)}))},changeConf:function(){var e=this,t=this.options.find((function(t){return t.id==e.selectedoption}));"undefined"!==typeof t?this.scrapingconfig=t:this.selectedoption=this.options[0].id},start_all:function(){this.running=!0,this.starttimer(),c.a.post("/api/scraping",this.scrapingconfig).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},handleSingle:function(e,t){this.running=!0,this.starttimer(),t.configid=this.scrapingconfig.id,c.a.post("/api/scraping/single",t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},stop:function(){c.a.get("/api/stopall").then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},changesort:function(e){this.sortprop=e.prop,this.sortorder=e.order,this.refresh()},refresh:function(){var e=this,t="page="+this.currentPage+"&size="+this.pagesize,o="&sortprop="+this.sortprop+"&sortorder="+this.sortorder,n="&blur="+this.blur,i="/api/scraping/record?"+t+o+n;c.a.get(i).then((function(t){if(e.timerstatus=0,e.scrapingrecords=t.data.data,e.currentPage=t.data.page,e.totalnum=t.data.total,e.running=t.data.running,e.running){var o=t.data.tasktotal,n=t.data.taskfinished,i=n/o*100;e.tips="刮削进度: "+i.toFixed(2)+"% ["+n+"/"+o+"]",e.starttimer()}else e.stoptimer()})).catch(function(e){console.log(e),this.timerstatus=0,this.starttimer()}.bind(this))},starttimer:function(){0===this.timerstatus&&(this.timer=setTimeout(function(){this.refresh()}.bind(this),2e3),this.timerstatus=1)},stoptimer:function(){clearInterval(this.timer),this.timer=null,this.timerstatus=0},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSearch:function(){this.refresh()},delrecords:function(){var e=this;this.$refs.confirm.show().then((function(){var t=e.$refs.confirm.subcheck,o=new Array;e.multipleSelection.forEach((function(e){o.push(e.id)}));var n={ids:o,delsrc:t};c.a.delete("/api/scraping/record",{data:n}).then((function(){e.$message({showClose:!0,duration:2e3,message:"清理成功",type:"success"}),e.refresh()})).catch((function(e){console.log(e)}))})).catch((function(){console.log("You rejected")}))},handleEdit:function(e,t){this.rowrecord=t,this.editdialog=!0,this.rowrecord.locked?this.recordoption=1:this.rowrecord.ignroed?this.recordoption=2:this.recordoption=0},cancelDeadtime:function(){this.rowrecord.deadtime=""},dialogexit:function(){this.editdialog=!1,this.refresh()},dialogupdate:function(){var e=this;this.editdialog=!1,1==this.recordoption?(this.rowrecord.ignored=!1,this.rowrecord.locked=!0):2==this.recordoption?(this.rowrecord.ignored=!0,this.rowrecord.locked=!1):(this.rowrecord.ignored=!1,this.rowrecord.locked=!1),c.a.put("/api/scraping/record",this.rowrecord).then((function(t){e.refresh(),console.log(t)})).catch((function(e){console.log(e)}))},handleCurrentChange:function(e){this.currentPage=e,this.refresh()},handleSizeChange:function(e){this.pagesize=e,this.refresh()},setDialogWidth:function(){var e=document.body.clientWidth,t=700;this.dialogWidth=e<t?"90%":t+"px"}}},V=P,T=(o("df67"),Object(m["a"])(V,k,y,!1,null,"e3e17c32",null)),O=T.exports,I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body-wrap"},[t("el-select",{attrs:{placeholder:"请选择配置"},on:{change:e.changeConf},model:{value:e.selectedoption,callback:function(t){e.selectedoption=t},expression:"selectedoption"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1),t("el-divider"),t("el-form",{attrs:{"label-position":"right","label-width":"auto",model:e.scrapingconfig}},[t("el-form-item",{attrs:{label:"配置名"}},[t("el-input",{model:{value:e.scrapingconfig.remark,callback:function(t){e.$set(e.scrapingconfig,"remark",t)},expression:"scrapingconfig.remark"}})],1),t("el-form-item",{attrs:{label:"刮削目录"}},[t("el-input",{model:{value:e.scrapingconfig.scraping_folder,callback:function(t){e.$set(e.scrapingconfig,"scraping_folder",t)},expression:"scrapingconfig.scraping_folder"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showSourceDialog},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"输出模式"}},[t("el-radio-group",{model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[t("el-radio",{staticClass:"radio-btn",attrs:{label:1}},[e._v("软链接")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:2}},[e._v("硬链接")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:3}},[e._v("移动文件")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:4}},[e._v("直接刮削")])],1)],1),1==e.mode?t("el-form-item",{attrs:{label:"软链接前缀"}},[t("el-input",{model:{value:e.scrapingconfig.soft_prefix,callback:function(t){e.$set(e.scrapingconfig,"soft_prefix",t)},expression:"scrapingconfig.soft_prefix"}})],1):e._e(),1==e.mode?t("el-form-item",{attrs:{label:"使用相对路径"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.scrapingconfig.is_sym_relative_path,callback:function(t){e.$set(e.scrapingconfig,"is_sym_relative_path",t)},expression:"scrapingconfig.is_sym_relative_path"}})],1):e._e(),4!=e.mode?t("el-form-item",{attrs:{label:"输出目录"}},[t("el-input",{model:{value:e.scrapingconfig.success_folder,callback:function(t){e.$set(e.scrapingconfig,"success_folder",t)},expression:"scrapingconfig.success_folder"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showOutputDialog},slot:"append"})],1)],1):e._e(),1==e.mode||2==e.mode?t("el-form-item",{attrs:{label:"失败目录"}},[t("el-input",{model:{value:e.scrapingconfig.failed_folder,callback:function(t){e.$set(e.scrapingconfig,"failed_folder",t)},expression:"scrapingconfig.failed_folder"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showFailedDialog},slot:"append"})],1)],1):e._e(),t("el-form-item",{attrs:{label:"并发线程(beta)"}},[t("el-input",{model:{value:e.scrapingconfig.threads_num,callback:function(t){e.$set(e.scrapingconfig,"threads_num",t)},expression:"scrapingconfig.threads_num"}})],1),t("el-form-item",{attrs:{label:"跳过目录"}},[t("el-input",{model:{value:e.scrapingconfig.escape_folders,callback:function(t){e.$set(e.scrapingconfig,"escape_folders",t)},expression:"scrapingconfig.escape_folders"}})],1),t("el-form-item",{attrs:{label:"大小限制"}},[t("el-input",{attrs:{placeholder:"忽略小于此值的文件,单位:MB。设置为0则不限制"},model:{value:e.scrapingconfig.escape_size,callback:function(t){e.$set(e.scrapingconfig,"escape_size",t)},expression:"scrapingconfig.escape_size"}})],1),t("el-form-item",{attrs:{label:"目录规则"}},[t("el-input",{model:{value:e.scrapingconfig.location_rule,callback:function(t){e.$set(e.scrapingconfig,"location_rule",t)},expression:"scrapingconfig.location_rule"}})],1),t("el-form-item",{attrs:{label:"命名规则"}},[t("el-input",{model:{value:e.scrapingconfig.naming_rule,callback:function(t){e.$set(e.scrapingconfig,"naming_rule",t)},expression:"scrapingconfig.naming_rule"}})],1),t("el-form-item",{attrs:{label:"刮削源"}},[t("el-input",{attrs:{placeholder:"默认顺序:javbus,airav,fanza,xcity,javdb,mgstage,madou,fc2,avsox,dlsite,carib,fc2club"},model:{value:e.scrapingconfig.site_sources,callback:function(t){e.$set(e.scrapingconfig,"site_sources",t)},expression:"scrapingconfig.site_sources"}}),t("div",{staticClass:"tip-info"},[e._v("指定源与顺序,无特殊需求,留空即可")])],1),t("el-form-item",{attrs:{label:"更多剧情"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.scrapingconfig.morestoryline,callback:function(t){e.$set(e.scrapingconfig,"morestoryline",t)},expression:"scrapingconfig.morestoryline"}}),t("div",{staticClass:"tip-info"},[e._v("尝试从不同站点获取更多剧情")])],1),t("el-form-item",{attrs:{label:"Javdb"}},[t("el-input",{attrs:{placeholder:"Javdb Cookies(有效期7天),非VIP无法获取额外内容,建议留空"},model:{value:e.scrapingconfig.cookies_javdb,callback:function(t){e.$set(e.scrapingconfig,"cookies_javdb",t)},expression:"scrapingconfig.cookies_javdb"}})],1),t("el-form-item",{attrs:{label:"刷新Emby"}},[t("el-input",{attrs:{placeholder:"Emby库刷新链接,查看说明文档"},model:{value:e.scrapingconfig.refresh_url,callback:function(t){e.$set(e.scrapingconfig,"refresh_url",t)},expression:"scrapingconfig.refresh_url"}}),t("div",{staticClass:"tip-info"},[e._v("如果Emby库内设置实时监控则不需要进行设置,选择适合自己的方案即可")])],1),t("el-form-item",{attrs:{label:"添加水印"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.scrapingconfig.watermark_enable,callback:function(t){e.$set(e.scrapingconfig,"watermark_enable",t)},expression:"scrapingconfig.watermark_enable"}})],1),1==e.scrapingconfig.watermark_enable?t("el-form-item",{attrs:{label:"水印大小"}},[t("el-input",{attrs:{type:"Number",placeholder:"添加的水印相对整图的比例 1/size "},model:{value:e.scrapingconfig.watermark_size,callback:function(t){e.$set(e.scrapingconfig,"watermark_size",t)},expression:"scrapingconfig.watermark_size"}})],1):e._e(),1==e.scrapingconfig.watermark_enable?t("el-form-item",{attrs:{label:"水印位置"}},[t("el-input",{attrs:{type:"Number",placeholder:"右上:0 左上:1 左下:2 右下:3"},model:{value:e.scrapingconfig.watermark_location,callback:function(t){e.$set(e.scrapingconfig,"watermark_location",t)},expression:"scrapingconfig.watermark_location"}})],1):e._e(),t("el-form-item",{attrs:{label:"下载剧照"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.scrapingconfig.extrafanart_enable,callback:function(t){e.$set(e.scrapingconfig,"extrafanart_enable",t)},expression:"scrapingconfig.extrafanart_enable"}})],1),1==e.scrapingconfig.extrafanart_enable?t("el-form-item",{attrs:{label:"剧照文件夹"}},[t("el-input",{model:{value:e.scrapingconfig.extrafanart_folder,callback:function(t){e.$set(e.scrapingconfig,"extrafanart_folder",t)},expression:"scrapingconfig.extrafanart_folder"}})],1):e._e(),t("el-form-item",{attrs:{label:"自动监控"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.scrapingconfig.auto_watch,callback:function(t){e.$set(e.scrapingconfig,"auto_watch",t)},expression:"scrapingconfig.auto_watch"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addconf}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.updateconf}},[e._v("保存")]),t("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.deleteconf}},[e._v("删除")])],1)],1),t("FileBrowserDialog",{directives:[{name:"show",rawName:"v-show",value:e.isDialogVisible,expression:"isDialogVisible"}],attrs:{dialogVisible:e.isDialogVisible,path:e.folderPath},on:{"update:path":function(t){e.folderPath=t},close:e.closeDialog}})],1)},E=[],j=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("transition",{attrs:{name:"dialog-fade"}},[t("div",{staticClass:"dialog-backdrop"},[t("div",{staticClass:"dialog",attrs:{role:"dialog","aria-labelledby":"dialogTitle","aria-describedby":"dialogDescription"}},[t("header",{staticClass:"browser-header",attrs:{id:"dialogTitle"}},[e._t("header",(function(){return[e._v(" 选择文件夹 ")]})),t("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close dialog"},on:{click:e.cancel}},[t("i",{staticClass:"el-icon-close"})])],2),t("section",{staticClass:"dialog-body",attrs:{id:"dialogDescription"}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:e.selectedPath,placement:"right"}},[t("span",{staticClass:"span-txt",domProps:{textContent:e._s(e.selectedPath)}})]),t("el-button",{staticClass:"btn-item",on:{click:function(t){return e.select(e.parentFolder)}}},[t("i",{staticClass:"el-icon-back"}),e._v("返回上级目录")]),e._l(e.directoryList,(function(o){return t("div",{key:o.index,staticClass:"filelist-body"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":400,content:o.fullname,placement:"right"}},[t("el-button",{staticClass:"btn-item",domProps:{textContent:e._s(o.fullname)},on:{click:function(t){return e.select(o.fullname)}}})],1)],1)}))],2),t("footer",{staticClass:"browser-footer"},[t("el-button",{attrs:{type:"primary","aria-label":"Close dialog"},on:{click:e.close}},[e._v(" 确认 ")])],1)])])])},A=[],F=function(e,t,o,n){function i(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function l(e){try{s(n["throw"](e))}catch(t){a(t)}}function s(e){e.done?o(e.value):i(e.value).then(r,l)}s((n=n.apply(e,t||[])).next())}))},B=function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(e){return function(t){return s([e,t])}}function s(l){if(o)throw new TypeError("Generator is already executing.");while(a&&(a=0,l[0]&&(r=0)),r)try{if(o=1,n&&(i=2&l[0]?n["return"]:l[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(s){l=[6,s],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},W=n["default"].extend({name:"FileBrowserDialog",data:function(){return{parentFolder:"",selectedPath:"/",directoryList:{}}},watch:{dialogVisible:function(e){e&&this.dialogInit()}},props:{dialogVisible:Boolean},methods:{getDirs:function(e){return void 0===e&&(e="/"),F(this,void 0,void 0,(function(){var t,o,n;return B(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t={path:e},[4,c.a.post("/api/scan/",t)];case 1:return o=i.sent().data,null==o.parent?this.$message({showClose:!0,duration:2e3,message:o.error,type:"error"}):(this.directoryList=o.dirs,this.parentFolder=o.parent),[3,3];case 2:return n=i.sent(),this.showSnack(n.message),[3,3];case 3:return[2]}}))}))},dialogInit:function(){try{this.select()}catch(e){this.getDirs()}},select:function(e){void 0===e&&(e="/"),""===e&&(e="/"),this.selectedPath=e,this.getDirs(e)},cancel:function(){this.$emit("close")},close:function(){this.$emit("update:path",this.selectedPath),this.$emit("close")}}}),N=W,R=(o("8d0c"),Object(m["a"])(N,j,A,!1,null,null,null)),M=R.exports,L={name:"scrapingconf",components:{FileBrowserDialog:M},data:function(){return{isDialogVisible:!1,openDialogID:1,folderPath:"",mode:1,scrapingconfig:{},selectedoption:-1,options:[]}},mounted:function(){this.getconfs()},methods:{getconfs:function(){var e=this,t="/api/scraping/conf/all";c.a.get(t).then((function(t){e.options=t.data,-1===e.selectedoption&&(e.selectedoption=e.options[0].id),e.changeConf()})).catch((function(e){console.log(e)}))},changeConf:function(){var e=this,t=this.options.find((function(t){return t.id==e.selectedoption}));if("undefined"===typeof t)return this.selectedoption=this.options[0].id,void(this.scrapingconfig=this.options[0]);this.scrapingconfig=t,3===this.scrapingconfig.main_mode?this.mode=4:1===this.scrapingconfig.link_type?this.mode=1:2===this.scrapingconfig.link_type?this.mode=2:this.mode=3},addconf:function(){var e=this;1===this.mode?(this.scrapingconfig.link_type=1,this.scrapingconfig.main_mode=1):2===this.mode?(this.scrapingconfig.link_type=2,this.scrapingconfig.main_mode=1):3===this.mode?(this.scrapingconfig.link_type=0,this.scrapingconfig.main_mode=1):4===this.mode&&(this.scrapingconfig.main_mode=3),c.a.post("/api/scraping/conf",this.scrapingconfig).then((function(t){e.scrapingconfig=t.data,e.selectedoption=e.scrapingconfig.id,e.getconfs(),e.$message({showClose:!0,duration:2e3,message:"新增成功",type:"success"})})).catch((function(e){console.log(e)}))},updateconf:function(){var e=this;1===this.mode?(this.scrapingconfig.link_type=1,this.scrapingconfig.main_mode=1):2===this.mode?(this.scrapingconfig.link_type=2,this.scrapingconfig.main_mode=1):3===this.mode?(this.scrapingconfig.link_type=0,this.scrapingconfig.main_mode=1):4===this.mode&&(this.scrapingconfig.main_mode=3),c.a.put("/api/scraping/conf",this.scrapingconfig).then((function(){e.$message({showClose:!0,duration:2e3,message:"保存成功",type:"success"})})).catch((function(e){console.log(e)}))},deleteconf:function(){var e=this;this.options.length<2?this.$message({showClose:!0,duration:2e3,message:"仅剩一份配置无法删除",type:"success"}):c.a.delete("/api/scraping/conf/"+this.scrapingconfig.id).then((function(){e.getconfs(),e.$message({showClose:!0,duration:2e3,message:"删除成功",type:"success"})})).catch((function(e){console.log(e)}))},showSourceDialog:function(){this.openDialogID=1,this.isDialogVisible=!0},showOutputDialog:function(){this.openDialogID=2,this.isDialogVisible=!0},showFailedDialog:function(){this.openDialogID=3,this.isDialogVisible=!0},closeDialog:function(){this.isDialogVisible=!1,1===this.openDialogID?this.scrapingconfig.scraping_folder=this.folderPath:2===this.openDialogID?this.scrapingconfig.success_folder=this.folderPath:3===this.openDialogID&&(this.scrapingconfig.failed_folder=this.folderPath)}}},J=L,G=(o("821b"),Object(m["a"])(J,I,E,!1,null,"1e0dc6ae",null)),q=G.exports,H={name:"JavScraping",components:{Scraping:O,ScrapingConf:q},data:function(){return{activeIndex:"first"}},methods:{handleSelect:function(e){this.activeIndex=e}}},K=H,Q=Object(m["a"])(K,_,w,!1,null,null,null),X=Q.exports,Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body-wrap"},[t("el-collapse",[t("el-collapse-item",[t("template",{slot:"title"},[t("el-select",{attrs:{placeholder:"请选择配置"},on:{change:e.changeConf},model:{value:e.selectedoption,callback:function(t){e.selectedoption=t},expression:"selectedoption"}},e._l(e.options,(function(e){return t("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1)],1),t("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-position":"right","label-width":"90px",model:e.transconfig}},[t("el-form-item",{attrs:{label:"配置名"}},[t("el-input",{model:{value:e.transconfig.remark,callback:function(t){e.$set(e.transconfig,"remark",t)},expression:"transconfig.remark"}})],1),t("el-form-item",{attrs:{label:"源目录"}},[t("el-input",{model:{value:e.transconfig.source_folder,callback:function(t){e.$set(e.transconfig,"source_folder",t)},expression:"transconfig.source_folder"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showSourceDialog},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"链接类型"}},[t("el-radio-group",{model:{value:e.transconfig.linktype,callback:function(t){e.$set(e.transconfig,"linktype",t)},expression:"transconfig.linktype"}},[t("el-radio",{attrs:{label:0}},[e._v("软链接")]),t("el-radio",{attrs:{label:1}},[e._v("硬链接")])],1)],1),0==e.transconfig.linktype?t("el-form-item",{attrs:{label:"软链接前缀"}},[t("el-input",{model:{value:e.transconfig.soft_prefix,callback:function(t){e.$set(e.transconfig,"soft_prefix",t)},expression:"transconfig.soft_prefix"}})],1):e._e(),0===e.transconfig.linktype?t("el-form-item",{attrs:{label:"使用相对路径"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.transconfig.is_sym_relative_path,callback:function(t){e.$set(e.transconfig,"is_sym_relative_path",t)},expression:"transconfig.is_sym_relative_path"}})],1):e._e(),t("el-form-item",{attrs:{label:"输出目录"}},[t("el-input",{model:{value:e.transconfig.output_folder,callback:function(t){e.$set(e.transconfig,"output_folder",t)},expression:"transconfig.output_folder"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showOutputDialog},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"过滤目录"}},[t("el-input",{model:{value:e.transconfig.escape_folder,callback:function(t){e.$set(e.transconfig,"escape_folder",t)},expression:"transconfig.escape_folder"}})],1),t("el-form-item",{attrs:{label:"立即转移"}},[t("el-input",{attrs:{placeholder:"对源目录下的指定文件(夹)立即进行转移操作,可立即应用当前更改。为空则不指定"},model:{value:e.transconfig.specified_files,callback:function(t){e.$set(e.transconfig,"specified_files",t)},expression:"transconfig.specified_files"}})],1),t("el-form-item",{attrs:{label:"大小限制"}},[t("el-input",{attrs:{placeholder:"忽略小于此值的文件,单位:MB。设置为0则不限制"},model:{value:e.transconfig.escape_size,callback:function(t){e.$set(e.transconfig,"escape_size",t)},expression:"transconfig.escape_size"}})],1),t("el-form-item",{attrs:{label:"修正剧集名"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.transconfig.fix_series,callback:function(t){e.$set(e.transconfig,"fix_series",t)},expression:"transconfig.fix_series"}})],1),t("el-divider",[e._v("扩展功能")]),t("el-form-item",{attrs:{label:"刷新Emby"}},[t("el-input",{attrs:{placeholder:"Emby库刷新链接,查看说明文档"},model:{value:e.transconfig.refresh_url,callback:function(t){e.$set(e.transconfig,"refresh_url",t)},expression:"transconfig.refresh_url"}})],1),t("el-form-item",{attrs:{label:"删除其他"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.transconfig.clean_others,callback:function(t){e.$set(e.transconfig,"clean_others",t)},expression:"transconfig.clean_others"}})],1),t("el-form-item",{attrs:{label:"简化名称"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.transconfig.replace_CJK,callback:function(t){e.$set(e.transconfig,"replace_CJK",t)},expression:"transconfig.replace_CJK"}})],1),t("el-form-item",{attrs:{label:"自动监控"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.transconfig.auto_watch,callback:function(t){e.$set(e.transconfig,"auto_watch",t)},expression:"transconfig.auto_watch"}})],1)],1),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addconf}},[e._v("新增")]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.updateconf}},[e._v("保存")]),t("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.deleteconf}},[e._v("删除")])],2)],1),t("el-divider"),t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{md:12}},[t("el-button",{attrs:{loading:e.running,size:"medium",type:"primary"},on:{click:e.onSubmit}},[e.running?t("span",[e._v("转移中...")]):t("span",[e._v("开始")])]),e.running?t("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.stop}},[e._v("停止")]):e._e()],1),t("el-col",{attrs:{md:8}},[t("el-input",{attrs:{width:"auto",placeholder:"模糊查询"},on:{input:e.handleSearch},model:{value:e.blur,callback:function(t){e.blur=t},expression:"blur"}})],1),t("el-col",{attrs:{md:3,xs:10}},[t("el-button-group",[t("el-button",{attrs:{disabled:0===e.multipleSelection.length,icon:"el-icon-delete",type:"danger"},on:{click:e.delrecords}})],1),t("confirm-dialog",{ref:"confirm",attrs:{title:"确认",message:"删除转移后的文件",subConfirmMessage:"同时删除原始文件"}})],1)],1),e.running?t("el-alert",{staticClass:"alter-tip",attrs:{title:e.tips,closable:!1,type:"info"}}):e._e(),t("el-table",{ref:"multipleTable",attrs:{data:e.transferdata,stripe:"","cell-style":{padding:"0",height:"50px"}},on:{"sort-change":e.changesort,"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{label:"原始名称","min-width":"150","show-overflow-tooltip":!0,prop:"srcname"}}),t("el-table-column",{attrs:{label:"原始地址","min-width":"110","show-overflow-tooltip":!0,prop:"srcpath"}}),t("el-table-column",{attrs:{label:"顶层目录",width:"120","show-overflow-tooltip":!0,prop:"topfolder"}}),t("el-table-column",{attrs:{label:"次级目录",width:"100","show-overflow-tooltip":!0,prop:"secondfolder"}}),t("el-table-column",{attrs:{label:"已删除",width:"100",align:"center",sortable:"custom",prop:"deleted"},scopedSlots:e._u([{key:"default",fn:function(o){return[!0===o.row.deleted?t("span",[e._v("✓")]):e._e(),!1===o.row.deleted?t("span"):e._e()]}}])}),t("el-table-column",{attrs:{label:"忽略",width:"80",align:"center",sortable:"custom",prop:"ignored"},scopedSlots:e._u([{key:"default",fn:function(o){return[!0===o.row.ignored?t("span",[e._v("✓")]):e._e(),!1===o.row.ignored?t("span"):e._e()]}}])}),t("el-table-column",{attrs:{label:"剧集",width:"60",align:"center",prop:"isepisode"},scopedSlots:e._u([{key:"default",fn:function(o){return[!0===o.row.isepisode?t("span",[e._v("✓")]):e._e(),!1===o.row.isepisode?t("span"):e._e()]}}])}),t("el-table-column",{attrs:{label:"季",width:"60",align:"center",prop:"season"},scopedSlots:e._u([{key:"default",fn:function(o){return[-1===o.row.season?t("span"):e._e(),o.row.season>-1?t("span",[e._v(e._s(o.row.season))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"集",width:"80",align:"center",prop:"episode"},scopedSlots:e._u([{key:"default",fn:function(o){return[-1===o.row.episode?t("span"):e._e(),-1!=o.row.episode?t("span",[e._v(e._s(o.row.episode))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"强制名称","min-width":"110","show-overflow-tooltip":!0,prop:"forcedname"}}),t("el-table-column",{attrs:{label:"实际路径","min-width":"110","show-overflow-tooltip":!0,prop:"destpath"}}),t("el-table-column",{attrs:{label:"计划删除时间",width:"140","show-overflow-tooltip":!0,sortable:"custom",prop:"deadtime"}}),t("el-table-column",{attrs:{label:"更新时间",width:"140","show-overflow-tooltip":!0,sortable:"custom",prop:"updatetime"}}),t("el-table-column",{attrs:{label:"操作",width:"65",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(o.$index,o.row)}}})]}}])})],1),t("el-pagination",{attrs:{"page-size":10,"page-sizes":[10,20,50,100],"pager-count":7,"current-page":e.currentPage,layout:"sizes, prev, pager, next",total:e.totalnum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("FileBrowserDialog",{directives:[{name:"show",rawName:"v-show",value:e.isDialogVisible,expression:"isDialogVisible"}],attrs:{dialogVisible:e.isDialogVisible,path:e.folderPath},on:{"update:path":function(t){e.folderPath=t},close:e.closeDialog}}),t("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.editdialog,width:e.dialogWidth},on:{"update:visible":function(t){e.editdialog=t}}},[t("el-form",{attrs:{model:e.rowrecord,"label-width":"75px"}},[t("el-form-item",{attrs:{label:"原始名称",prop:"srcname"}},[t("span",{domProps:{textContent:e._s(e.rowrecord.srcname)}})]),t("el-form-item",{attrs:{label:"原始地址",prop:"srcpath"}},[t("span",{domProps:{textContent:e._s(e.rowrecord.srcpath)}})]),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-radio-group",{model:{value:e.recordoption,callback:function(t){e.recordoption=t},expression:"recordoption"}},[t("el-radio",{staticClass:"radio-btn",attrs:{label:0}},[e._v("正常")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:1}},[e._v("锁定")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:2}},[e._v("忽略")])],1)],1),t("el-form-item",{attrs:{label:"强制名称",prop:"forcedname"}},[t("el-input",{attrs:{placeholder:"强制使用的文件名"},model:{value:e.rowrecord.forcedname,callback:function(t){e.$set(e.rowrecord,"forcedname",t)},expression:"rowrecord.forcedname"}})],1),t("el-form-item",{attrs:{label:"顶层目录",prop:"topfolder"}},[t("el-input",{model:{value:e.rowrecord.topfolder,callback:function(t){e.$set(e.rowrecord,"topfolder",t)},expression:"rowrecord.topfolder"}}),t("el-checkbox",{model:{value:e.renameAllTop,callback:function(t){e.renameAllTop=t},expression:"renameAllTop"}},[e._v("更改所有相同的顶层目录")])],1),t("el-form-item",{attrs:{label:"剧集",prop:"isepisode"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.rowrecord.isepisode,callback:function(t){e.$set(e.rowrecord,"isepisode",t)},expression:"rowrecord.isepisode"}})],1),e.rowrecord.isepisode?e._e():t("el-form-item",{attrs:{label:"次级目录",prop:"secondfolder"}},[t("el-input",{attrs:{placeholder:"特殊目录，例如: specials  extras"},model:{value:e.rowrecord.secondfolder,callback:function(t){e.$set(e.rowrecord,"secondfolder",t)},expression:"rowrecord.secondfolder"}}),t("el-checkbox",{model:{value:e.renameAllSub,callback:function(t){e.renameAllSub=t},expression:"renameAllSub"}},[e._v("更改所有相同的次级目录")])],1),e.rowrecord.isepisode?t("el-form-item",{attrs:{label:"季",prop:"season"}},[t("el-input",{model:{value:e.rowrecord.season,callback:function(t){e.$set(e.rowrecord,"season",t)},expression:"rowrecord.season"}}),t("el-checkbox",{model:{value:e.renameAllSub,callback:function(t){e.renameAllSub=t},expression:"renameAllSub"}},[e._v("更改所有相同的季")])],1):e._e(),e.rowrecord.isepisode?t("el-form-item",{attrs:{label:"集",prop:"episode"}},[t("el-input",{model:{value:e.rowrecord.episode,callback:function(t){e.$set(e.rowrecord,"episode",t)},expression:"rowrecord.episode"}})],1):e._e(),t("el-form-item",{attrs:{label:"清理时间",prop:"deadtime"}},[t("div",[t("el-input",{staticStyle:{width:"12rem","margin-right":"1em"},attrs:{disabled:!0,size:"small"},model:{value:e.rowrecord.deadtime,callback:function(t){e.$set(e.rowrecord,"deadtime",t)},expression:"rowrecord.deadtime"}}),""!=e.rowrecord.deadtime?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.cancelDeadtime()}}},[e._v("取消删除计划")]):e._e()],1),t("div",{staticClass:"tip-info"},[e._v("源文件或刮削后文件不存在,到此时间将删除所有关联文件")])])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.dialogexit()}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogupdate()}}},[e._v("修改")])],1)],1)],1)},U=[],Z={name:"transfer",components:{FileBrowserDialog:M,ConfirmDialog:z},data:function(){return{running:!1,timer:null,timerstatus:0,tips:"转移中",isDialogVisible:!1,openDialogID:1,folderPath:"",currentPage:1,totalnum:10,pagesize:10,blur:"",sortprop:"",sortorder:"",transferdata:[],transconfig:{},selectedoption:-1,options:[],multipleSelection:[],dialogVisible:!1,editdialog:!1,rowrecord:[],recordoption:0,renameAllTop:!1,renameAllSub:!1}},created:function(){this.getconfs(),this.setDialogWidth()},mounted:function(){var e=this;this.refresh(),window.onresize=function(){return function(){e.setDialogWidth()}()}},beforeDestroy:function(){this.stoptimer()},methods:{onSubmit:function(){this.running=!0,this.starttimer(),c.a.post("/api/transfer",this.transconfig).catch((function(e){console.log(e)}))},stop:function(){c.a.get("/api/stopall").then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},changesort:function(e){this.sortprop=e.prop,this.sortorder=e.order,this.refresh()},refresh:function(){var e=this,t="page="+this.currentPage+"&size="+this.pagesize,o="&sortprop="+this.sortprop+"&sortorder="+this.sortorder,n="&blur="+this.blur,i="/api/transfer/record?"+t+o+n;c.a.get(i).then((function(t){if(e.timerstatus=0,e.transferdata=t.data.data,e.currentPage=t.data.page,e.totalnum=t.data.total,e.running=t.data.running,e.running){var o=t.data.tasktotal,n=t.data.taskfinished,i=n/o*100;e.tips="转移进度: "+i.toFixed(2)+"% ["+n+"/"+o+"]",console.log(e.tips),e.starttimer()}else e.stoptimer()})).catch(function(e){console.log(e),this.timerstatus=0,this.starttimer()}.bind(this))},starttimer:function(){0===this.timerstatus&&(this.timer=setTimeout(function(){this.refresh()}.bind(this),2e3),this.timerstatus=1)},stoptimer:function(){clearInterval(this.timer),this.timer=null,this.timerstatus=0},delrecords:function(){var e=this;this.$refs.confirm.show().then((function(){var t=e.$refs.confirm.subcheck,o=new Array;e.multipleSelection.forEach((function(e){o.push(e.id)}));var n={ids:o,delsrc:t};c.a.delete("/api/transfer/record",{data:n}).then((function(){e.$message({showClose:!0,duration:2e3,message:"清理成功",type:"success"}),e.refresh()})).catch((function(e){console.log(e)}))})).catch((function(){console.log("You rejected")}))},editfolders:function(){console.log("te")},editfoldersEnable:function(){return!1},handleCurrentChange:function(e){this.currentPage=e,this.refresh()},handleSizeChange:function(e){this.pagesize=e,this.refresh()},getconfs:function(){var e=this,t="/api/transfer/conf/all";c.a.get(t).then((function(t){e.options=t.data,-1===e.selectedoption&&(e.selectedoption=e.options[0].id),e.changeConf()})).catch((function(e){console.log(e)}))},changeConf:function(){var e=this,t=this.options.find((function(t){return t.id==e.selectedoption}));if("undefined"===typeof t)return this.selectedoption=this.options[0].id,void(this.transconfig=this.options[0]);this.transconfig=t},addconf:function(){var e=this;c.a.post("/api/transfer/conf",this.transconfig).then((function(t){e.transconfig=t.data,e.selectedoption=e.transconfig.id,e.getconfs(),e.$message({showClose:!0,duration:2e3,message:"新增成功",type:"success"})})).catch((function(e){console.log(e)}))},updateconf:function(){var e=this;c.a.put("/api/transfer/conf",this.transconfig).then((function(t){e.transconfig=t.data,e.getconfs(),e.$message({showClose:!0,duration:2e3,message:"保存成功",type:"success"})})).catch((function(e){console.log(e)}))},deleteconf:function(){var e=this;this.options.length<2?this.$message({showClose:!0,duration:2e3,message:"仅剩一份配置无法删除",type:"success"}):c.a.delete("/api/transfer/conf/"+this.transconfig.id).then((function(){e.getconfs(),e.$message({showClose:!0,duration:2e3,message:"删除成功",type:"success"})})).catch((function(e){console.log(e)}))},showSourceDialog:function(){this.openDialogID=1,this.isDialogVisible=!0},showOutputDialog:function(){this.openDialogID=2,this.isDialogVisible=!0},closeDialog:function(){this.isDialogVisible=!1,1===this.openDialogID?this.transconfig.source_folder=this.folderPath:2===this.openDialogID&&(this.transconfig.output_folder=this.folderPath)},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleEdit:function(e,t){this.rowrecord=t,this.editdialog=!0,this.rowrecord.locked?this.recordoption=1:this.rowrecord.ignroed?this.recordoption=2:this.recordoption=0,this.renameAllTop=!1,this.renameAllSub=!1},cancelDeadtime:function(){this.rowrecord.deadtime=""},dialogexit:function(){this.editdialog=!1,this.refresh()},dialogupdate:function(){var e=this;this.editdialog=!1,1==this.recordoption?(this.rowrecord.ignored=!1,this.rowrecord.locked=!0):2==this.recordoption?(this.rowrecord.ignored=!0,this.rowrecord.locked=!1):(this.rowrecord.ignored=!1,this.rowrecord.locked=!1),this.rowrecord.renameAllTop=this.renameAllTop,this.rowrecord.renameAllSub=this.renameAllSub,c.a.put("/api/transfer/record",this.rowrecord).then((function(t){e.refresh(),console.log(t)})).catch((function(e){console.log(e)}))},setDialogWidth:function(){var e=document.body.clientWidth,t=700;this.dialogWidth=e<t?"90%":t+"px"},handleSearch:function(){this.refresh()}}},ee=Z,te=(o("f0d0"),Object(m["a"])(ee,Y,U,!1,null,"f47012ea",null)),oe=te.exports,ne=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{attrs:{"label-position":"right","label-width":"auto",model:e.renameconf}},[t("el-form-item",{attrs:{label:"源目录"}},[t("el-input",{attrs:{placeholder:"需要改名目录"},model:{value:e.renameconf.source_folder,callback:function(t){e.$set(e.renameconf,"source_folder",t)},expression:"renameconf.source_folder"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showDialog},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"链接类型"}},[t("el-radio-group",{model:{value:e.renametype,callback:function(t){e.renametype=t},expression:"renametype"}},[t("el-radio",{attrs:{label:0}},[e._v("正则")]),t("el-radio",{attrs:{label:1}},[e._v("替换")])],1)],1),0==e.renametype?t("el-form-item",{attrs:{label:"自定义"}},[t("el-input",{attrs:{placeholder:"自定义正则匹配规则，默认使用针对剧集的匹配规则"},model:{value:e.renameconf.reg,callback:function(t){e.$set(e.renameconf,"reg",t)},expression:"renameconf.reg"}})],1):e._e(),0==e.renametype?t("el-form-item",{attrs:{label:"修正前缀"}},[t("el-input",{attrs:{placeholder:"默认S01E, 将匹配的 E11或 [11] 修正为 S01E11"},model:{value:e.renameconf.prefix,callback:function(t){e.$set(e.renameconf,"prefix",t)},expression:"renameconf.prefix"}})],1):e._e(),0==e.renametype?t("el-form-item",[t("el-button",{attrs:{type:"info",size:"medium"},on:{click:e.preview}},[e._v("预览重命名")]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.apply}},[e._v("应用")])],1):e._e(),1==e.renametype?t("el-form-item",{attrs:{label:"替换部分"}},[t("el-input",{model:{value:e.renameconf.base,callback:function(t){e.$set(e.renameconf,"base",t)},expression:"renameconf.base"}})],1):e._e(),1==e.renametype?t("el-form-item",{attrs:{label:"替换后"}},[t("el-input",{model:{value:e.renameconf.newfix,callback:function(t){e.$set(e.renameconf,"newfix",t)},expression:"renameconf.newfix"}})],1):e._e(),1==e.renametype?t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.replace}},[e._v("应用")])],1):e._e()],1),t("el-divider"),t("el-table",{staticStyle:{width:"95%"},attrs:{data:e.prenames}},[t("el-table-column",{attrs:{prop:"original",label:"原始名字"}}),t("el-table-column",{attrs:{prop:"rename",label:"重命名后"}})],1),t("FileBrowserDialog",{directives:[{name:"show",rawName:"v-show",value:e.isDialogVisible,expression:"isDialogVisible"}],attrs:{dialogVisible:e.isDialogVisible,path:e.renameconf.source_folder},on:{"update:path":function(t){return e.$set(e.renameconf,"source_folder",t)},close:e.closeDialog}})],1)},ie=[],ae={name:"rename",components:{FileBrowserDialog:M},data:function(){return{isDialogVisible:!1,prenames:[],renametype:0,renameconf:{source_folder:"",reg:"",prefix:"",ext_type:"",base:"",newfix:""}}},methods:{preview:function(){var e=this;c.a.post("/api/previewrename",this.renameconf).then((function(t){0===t.data.length?e.$message({showClose:!0,duration:2e3,message:"未发现可改名文件",type:"warning"}):e.prenames=t.data})).catch((function(){e.$message({showClose:!0,duration:2e3,message:"异常! 请查看日志或检查路径是否存在",type:"error"})}))},apply:function(){var e=this;this.fixnames=[],this.prenames=[],c.a.post("/api/renamebyreg",this.renameconf).then((function(t){0===t.data.length?e.$message({showClose:!0,duration:2e3,message:"未发现可改名文件",type:"success"}):(e.prenames=t.data,e.$message({showClose:!0,duration:2e3,message:"重命名成功",type:"success"}))})).catch((function(){e.$message({showClose:!0,duration:2e3,message:"异常! 请查看日志或检查路径是否存在",type:"error"})}))},replace:function(){var e=this;c.a.post("/api/renamebyrep",this.renameconf).then((function(t){console.log(t),e.$message({showClose:!0,duration:2e3,message:"重命名成功",type:"success"})})).catch((function(){e.$message({showClose:!0,duration:2e3,message:"异常! 请查看日志或检查路径是否存在",type:"error"})}))},showDialog:function(){this.isDialogVisible=!0},closeDialog:function(){this.isDialogVisible=!1}}},re=ae,le=Object(m["a"])(re,ne,ie,!1,null,null,null),se=le.exports,ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body-wrap"},[t("div",{staticClass:"row-card"},[t("el-collapse",[t("el-collapse-item",{attrs:{title:"Transmission种子下载完成后执行脚本:",name:"1"}},[t("pre",{staticClass:"pre-md"},[e._v("                    "),t("code",[e._v('\n    #!/bin/bash\n    TR_DOWNLOADS="$TR_TORRENT_DIR/$TR_TORRENT_NAME"\n    curl -XPOST http://127.0.0.1:12346/api/client \\\n    -H \'Content-Type: application/json\' \\\n    --data @<(cat <<EOF\n    {"path":"$TR_DOWNLOADS"}\n    EOF\n    )')]),e._v("\n                ")])]),t("el-collapse-item",{attrs:{title:"qBittorrent种子下载完成后执行脚本:",name:"2"}},[t("pre",{staticClass:"pre-md"},[e._v("                    "),t("code",[e._v('\n    #!/bin/bash\n    # qbcomplete.sh "%F"\n    QB_DOWNLOADS="${1}"\n    curl -XPOST http://127.0.0.1:12346/api/client -H \'Content-Type: application/json\' \\\n    --data @<(cat <<EOF\n    {"path":"$QB_DOWNLOADS"}\n    EOF\n    )')]),e._v(" \n                ")])])],1)],1),t("el-form",{attrs:{"label-position":"right","label-width":"auto",model:e.config}},[t("el-form-item",{attrs:{label:"源前缀"}},[t("el-input",{attrs:{placeholder:"需要替换的前缀"},model:{value:e.config.original,callback:function(t){e.$set(e.config,"original",t)},expression:"config.original"}}),t("div",{staticClass:"tip-info"},[e._v("参考简介内软链接前缀说明")])],1),t("el-form-item",{attrs:{label:"更改前缀"}},[t("el-input",{attrs:{placeholder:"前缀"},model:{value:e.config.prefixed,callback:function(t){e.$set(e.config,"prefixed",t)},expression:"config.prefixed"}}),t("div",{staticClass:"tip-info"},[e._v("参考简介内软链接前缀说明,修正后,ikaros可访问的目录/文件")])],1),t("el-form-item",{attrs:{label:"刮削配置"}},[t("el-checkbox-group",{on:{change:e.handleScChange},model:{value:e.checkedsc,callback:function(t){e.checkedsc=t},expression:"checkedsc"}},e._l(e.scoptions,(function(o){return t("el-checkbox",{key:o.id,attrs:{label:o.id}},[e._v(e._s(o.remark))])})),1)],1),t("el-form-item",{attrs:{label:"转移配置"}},[t("el-checkbox-group",{on:{change:e.handleTrChange},model:{value:e.checkedtr,callback:function(t){e.checkedtr=t},expression:"checkedtr"}},e._l(e.troptions,(function(o){return t("el-checkbox",{key:o.id,attrs:{label:o.id}},[e._v(e._s(o.remark))])})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1),t("el-divider",[e._v("任务列表")]),t("div",[t("el-button",{attrs:{type:"danger"},on:{click:e.clean}},[e._v("清空")])],1),t("el-table",{staticStyle:{width:"95%"},attrs:{data:e.records}},[t("el-table-column",{attrs:{prop:"path",label:"任务路径"}}),t("el-table-column",{attrs:{prop:"status",label:"状态"}})],1)],1)},ue=[],de={name:"automation",data:function(){return{config:{},records:[],troptions:[],checkedtr:[],scoptions:[],checkedsc:[]}},mounted:function(){var e=this;this.getTransferConf(),this.getScrapingConf(),this.getTasks(),this.timer=setInterval(this.getTasks,1500),c.a.get("/api/auto/conf").then((function(t){e.config=t.data;for(var o=e.config.transferconfs.split(";"),n=0;n<o.length;n++)""!=o[n]&&e.checkedtr.push(Number(o[n]));var i=e.config.scrapingconfs.split(";");for(n=0;n<i.length;n++)""!=i[n]&&e.checkedsc.push(Number(i[n]))})).catch((function(e){console.log(e)}))},beforeDestroy:function(){clearInterval(this.timer)},methods:{getTransferConf:function(){var e=this,t="/api/transfer/conf/all";c.a.get(t).then((function(t){e.troptions=t.data})).catch((function(e){console.log(e)}))},handleTrChange:function(e){for(var t=[],o=0;o<e.length;o++)t.includes(e[o])||t.push(e[o]);this.config.transferconfs=t.join(";")},getScrapingConf:function(){var e=this,t="/api/scraping/conf/all";c.a.get(t).then((function(t){e.scoptions=t.data})).catch((function(e){console.log(e)}))},handleScChange:function(e){for(var t=[],o=0;o<e.length;o++)t.includes(e[o])||t.push(e[o]);this.config.scrapingconfs=t.join(";")},onSubmit:function(){var e=this;c.a.put("/api/auto/conf",this.config).then((function(){e.$message({showClose:!0,duration:2e3,message:"保存成功",type:"success"})})).catch((function(e){console.log(e)}))},getTasks:function(){var e=this;c.a.get("/api/auto/task").then((function(t){e.records=t.data})).catch((function(e){console.log(e)}))},clean:function(){var e=this;c.a.delete("/api/auto/task").then((function(){e.$message({showClose:!0,duration:2e3,message:"清理完成",type:"success"})})).catch((function(e){console.log(e)}))}}},fe=de,pe=(o("4002"),Object(m["a"])(fe,ce,ue,!1,null,"5214b3c2",null)),he=pe.exports,ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body-wrap"},[t("el-form",{attrs:{"label-position":"right","label-width":"auto"}},[t("el-form-item",{attrs:{label:"日志等级"}},[t("el-radio-group",{on:{change:e.updateloglvl},model:{value:e.loglevel,callback:function(t){e.loglevel=t},expression:"loglevel"}},[t("el-radio",{staticClass:"radio-btn",attrs:{label:10}},[e._v("DEBUG")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:20}},[e._v("INFO")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:30}},[e._v("WARNING")]),t("el-radio",{staticClass:"radio-btn",attrs:{label:40}},[e._v("ERROR")])],1)],1)],1),t("el-form",{attrs:{"label-position":"right","label-width":"auto",model:e.localConf}},[t("el-divider",[e._v("代理")]),t("el-form-item",{attrs:{label:"使用代理"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.confValueChange},model:{value:e.localConf.proxy_enable,callback:function(t){e.$set(e.localConf,"proxy_enable",t)},expression:"localConf.proxy_enable"}})],1),1==e.localConf.proxy_enable?t("el-form-item",{attrs:{label:"类型"}},[t("el-input",{attrs:{placeholder:"支持: http socks5 socks5h"},on:{change:e.confValueChange},model:{value:e.localConf.proxy_type,callback:function(t){e.$set(e.localConf,"proxy_type",t)},expression:"localConf.proxy_type"}})],1):e._e(),1==e.localConf.proxy_enable?t("el-form-item",{attrs:{label:"地址"}},[t("el-input",{attrs:{placeholder:"127.0.0.1:1080"},on:{change:e.confValueChange},model:{value:e.localConf.proxy_address,callback:function(t){e.$set(e.localConf,"proxy_address",t)},expression:"localConf.proxy_address"}})],1):e._e(),t("el-divider",[e._v("通知")]),t("el-form-item",{attrs:{label:"TG token"}},[t("el-input",{attrs:{placeholder:"Telegram token"},on:{change:e.confValueChange},model:{value:e.localConf.tg_token,callback:function(t){e.$set(e.localConf,"tg_token",t)},expression:"localConf.tg_token"}}),t("div",{staticClass:"tip-info"},[e._v("配置后 "),t("a",{attrs:{href:"https://github.com/Suwmlee/ikaros/wiki/%E6%8E%A8%E9%80%81%E6%B6%88%E6%81%AF%E6%95%88%E6%9E%9C",target:"_blank"}},[e._v("效果展示")])])],1),t("el-form-item",{attrs:{label:"TG chatid"}},[t("el-input",{attrs:{placeholder:"Telegram chatid"},on:{change:e.confValueChange},model:{value:e.localConf.tg_chatid,callback:function(t){e.$set(e.localConf,"tg_chatid",t)},expression:"localConf.tg_chatid"}})],1),t("el-form-item",{attrs:{label:"微信 corpid"}},[t("el-input",{attrs:{placeholder:"企业微信 corpid"},on:{change:e.confValueChange},model:{value:e.localConf.wechat_corpid,callback:function(t){e.$set(e.localConf,"wechat_corpid",t)},expression:"localConf.wechat_corpid"}}),t("div",{staticClass:"tip-info"},[e._v("参考 "),t("a",{attrs:{href:"https://developer.work.weixin.qq.com/document/path/90665",target:"_blank"}},[e._v("企业微信开发指南")])])],1),t("el-form-item",{attrs:{label:"微信 secret"}},[t("el-input",{attrs:{placeholder:"企业微信 corpsecret"},on:{change:e.confValueChange},model:{value:e.localConf.wechat_corpsecret,callback:function(t){e.$set(e.localConf,"wechat_corpsecret",t)},expression:"localConf.wechat_corpsecret"}}),t("div",{staticClass:"tip-info"},[e._v("同上")])],1),t("el-form-item",{attrs:{label:"微信 agentid"}},[t("el-input",{attrs:{placeholder:"企业微信 agentid"},on:{change:e.confValueChange},model:{value:e.localConf.wechat_agentid,callback:function(t){e.$set(e.localConf,"wechat_agentid",t)},expression:"localConf.wechat_agentid"}}),t("div",{staticClass:"tip-info"},[e._v("同上")])],1),t("el-divider",[e._v("清理")]),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.cleandata}},[e._v("手动清理")]),t("div",{staticClass:"tip-info"},[e._v("删除目标文件不存在的记录及关联文件(不含源文件)")])],1),t("el-form-item",{attrs:{label:"计划任务"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.confValueChange},model:{value:e.localConf.task_clean,callback:function(t){e.$set(e.localConf,"task_clean",t)},expression:"localConf.task_clean"}}),t("div",{staticClass:"tip-info",staticStyle:{color:"red"}},[e._v("注意! 检测源文件或目标文件不存在的记录并标记。七天后将删除所有关联文件(包含源文件),如设置transmission,也会删除关联的种子")])],1),t("el-divider",[e._v("下载服务器 - Transmission")]),t("el-form-item",{attrs:{label:"服务器地址"}},[t("el-input",{attrs:{placeholder:"完整的服务器地址(含端口),如: http://192.168.1.1:5000/"},on:{change:e.confValueChange},model:{value:e.localConf.tr_url,callback:function(t){e.$set(e.localConf,"tr_url",t)},expression:"localConf.tr_url"}})],1),t("el-form-item",{attrs:{label:"登录名"}},[t("el-input",{attrs:{autoComplete:"off",placeholder:"登录名"},on:{change:e.confValueChange},model:{value:e.localConf.tr_username,callback:function(t){e.$set(e.localConf,"tr_username",t)},expression:"localConf.tr_username"}})],1),t("el-form-item",{attrs:{label:"登陆密码"}},[t("el-input",{attrs:{"show-password":"","auto-complete":"new-password",placeholder:"登陆密码"},on:{change:e.confValueChange},model:{value:e.localConf.tr_passwd,callback:function(t){e.$set(e.localConf,"tr_passwd",t)},expression:"localConf.tr_passwd"}})],1),t("el-form-item",{attrs:{label:"下载目录映射"}},[t("el-input",{attrs:{placeholder:"tr下载目录映射到ikaros目录,如: /volume1/Media:/media"},on:{change:e.confValueChange},model:{value:e.localConf.tr_prefix,callback:function(t){e.$set(e.localConf,"tr_prefix",t)},expression:"localConf.tr_prefix"}})],1),t("el-divider",[e._v("更新(开发中)")]),t("el-form-item",{attrs:{label:"刮削库"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("span",[e._v("当前版本: "),t("label",{domProps:{textContent:e._s(e.libcurrent)}})])]),t("el-col",{attrs:{span:8}},[t("span",[e._v("最新版本: "),t("label",{domProps:{textContent:e._s(e.liblatest)}})])]),t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.checklibver}},[e._v("检测")]),t("el-button",{attrs:{type:"danger",size:"medium"},on:{click:e.updatelib}},[e._v("更新")])],1)],1)],1),t("el-divider"),t("div",{staticClass:"row"},[t("h2",[e._v("日志:")]),t("div",{staticClass:"logging_window"},[t("pre",{ref:"output"})])])],1)},me=[],be={name:"options",data:function(){return{loglevel:20,libcurrent:"0.1.0",liblatest:"0.1.0",loginfo:"",lastinfo:"",logtimer:null,localConf:{}}},mounted:function(){var e=this;this.getconfig(),c.a.get("/api/options/loglevel").then((function(t){e.loglevel=t.data.loglevel})).catch((function(e){console.log(e)}));var t=new WebSocket("ws://".concat(location.host,"/ws/logstream?tail=1"));t.onmessage=function(t){e.lastinfo=t.data,e.loginfo=e.loginfo+e.lastinfo,e.$refs.output.textContent=e.loginfo,e.$refs.output.scrollTop=e.$refs.output.scrollHeight},t.onerror=function(){console.log("ws close"),t.close()}},methods:{updateloglvl:function(){var e=this,t={loglevel:this.loglevel};c.a.put("/api/options/loglevel",t).then((function(){e.$message({showClose:!0,duration:2e3,message:"保存成功",type:"success"})})).catch((function(e){console.log(e)}))},getconfig:function(){var e=this;c.a.get("/api/options/config").then((function(t){e.localConf=t.data}))},updateconfig:function(){var e=this;c.a.put("/api/options/config",this.localConf).then((function(){e.$message({showClose:!0,duration:2e3,message:"保存成功",type:"success"})})).catch((function(e){console.log(e)}))},confValueChange:function(e){console.log(e),this.updateconfig()},checklibver:function(){var e=this;c.a.get("/api/options/check/lib").then((function(t){e.libcurrent=t.data.installed,e.liblatest=t.data.latest})).catch((function(e){console.log(e)}))},updatelib:function(){c.a.put("/api/options/check/lib").then((function(){})).catch((function(e){console.log(e)}))},cleandata:function(){var e=this;c.a.get("/api/options/cleanrecord").then((function(t){console.log(t),e.$message({showClose:!0,duration:2e3,message:"清理成功",type:"success"})})).catch((function(e){console.log(e)}))}}},ve=be,_e=(o("8099"),Object(m["a"])(ve,ge,me,!1,null,"ceebe8c8",null)),we=_e.exports,ke=function(e,t,o,n){function i(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function l(e){try{s(n["throw"](e))}catch(t){a(t)}}function s(e){e.done?o(e.value):i(e.value).then(r,l)}s((n=n.apply(e,t||[])).next())}))},ye=function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(e){return function(t){return s([e,t])}}function s(l){if(o)throw new TypeError("Generator is already executing.");while(a&&(a=0,l[0]&&(r=0)),r)try{if(o=1,n&&(i=2&l[0]?n["return"]:l[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(s){l=[6,s],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},xe={name:"App",components:{Tutorial:v,JavScraping:X,Transfer:oe,Reanme:se,Automation:he,Options:we},data:function(){return{version:"",activeIndex:"1"}},created:function(){return ke(this,void 0,void 0,(function(){return ye(this,(function(e){return this.versionInfo(),[2]}))}))},methods:{handleSelect:function(e){this.activeIndex=e},versionInfo:function(){var e=this;c.a.get("/api/version").then((function(t){e.version=t.data})).catch((function(e){console.log(e)}))}}},Ce=xe,$e=(o("dccf"),Object(m["a"])(Ce,r,l,!1,null,null,null)),Se=$e.exports;n["default"].use(a.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(Se)}}).$mount("#app")},dccf:function(e,t,o){"use strict";o("4f13")},df67:function(e,t,o){"use strict";o("0f3d")},e280:function(e,t,o){},f0d0:function(e,t,o){"use strict";o("869e")},fbcf:function(e,t,o){}});
//# sourceMappingURL=app.15f8f5f7.js.map